!function(e){e.fn.fotoexpose=function(t){var i={increment:"",fade:1e3,sliderSpeed:800,locationSpeed:600,viewer:"#fe-viewer",largePath:"gallery/largePhotos/",mobileWidth:768,modwidth:!0,loaderClass:"fe-loader",loadedClass:"fe-loaded",thumbWidth:"",slideshow:4e3,effects:""},t=e.extend(i,t);return this.each(function(){function i(){var e=g.css("left").replace(/\D/g,"");e>T&&(g.animate({left:"-="+t.increment+"px"},t.sliderSpeed,function(){g.css("left").replace("px","")<=T&&x.fadeOut("fast"),w&&s(w)}),y.fadeIn("fast"))}function n(){g.css("left").replace("px","")<0&&(backto=-1*g.css("left").replace("px",""),backto-=t.increment,g.animate({left:"+="+t.increment+"px"},t.sliderSpeed,function(){g.css("left").replace("px","")>=0&&y.fadeOut("fast"),x.fadeIn("fast"),w&&s(w)}))}function d(){k.text("Stop"),C.show(),c=self.setTimeout(function(){return(w=w.next().length?w.next():!1)?(r(w),idc=s(w),void(idc>S-M&&i())):(k.text("Play"),C.hide(),g.css({left:0}),w=p,s(w),W>mobileWidth&&x.show(),y.hide(),b=!1,r(w),!1)},t.slideshow)}function f(){self.clearTimeout(c),k.removeClass("shutdown"),k.text("Play"),C.hide()}function a(){r(w),s(w),idc=s(w),idc>S-M?i():idc<1&&n()}function s(i){var n=e(i).offset().left-I.offset().left;return 1==t.modwidth?u.animate({left:n+"px",width:e(i).width()+"px"},t.locationSpeed):u.animate({left:n+"px"},t.locationSpeed),n}function o(t){var i=0;return t.find("img").each(function(){i+=e(this).outerWidth(!0)}),i}function h(t){var i=e("#fe-fotobox").width(),n=Math.floor(i/t);return n*t}function l(e){var t=P.width()<e.width()?P.width()/e.width():1,i={width:e.width()*t,height:e.height()*t};return i}function r(i){var n=i.attr("fe-full");e(t.viewer).find("img").remove("img"),e(t.viewer).addClass(t.loaderClass),img=new Image,e(img).load(function(){e(img).hide(),e(t.viewer).removeClass(t.loaderClass).addClass(t.loadedClass).append(img);var i=l(e(img));e(img).css({width:i.width,height:i.height,"margin-right":"auto","margin-left":"auto"}),e(t.viewer).css({height:i.height+24}),e(img).stop(!0,!0).fadeIn(t.fade),b?d():f()}).attr("src",n).stop(!0,!0).fadeIn(t.fade).addClass(t.effects)}var c,u=e("#fe-current"),m=e(this),g=m.find("div:first-child"),w=g.find("img:first-child"),p=g.find("img:first-child"),v=e("#largePhoto"),x=(g.find("img:last-child"),e("."+t.loaderClass).css("background-image"),e("#fe-location"),e("#fe-more")),C=e(".fe-playing"),b=!1,k=e("#fe-playtext"),y=e("#fe-previous"),W=screen.width,S=t.thumbWidth<1?h(w.width()):t.thumbWidth,I=e("#fe-thumbs"),P=e("#fe-viewer");t.increment=t.increment>0?t.increment:S;var M=g.find("img:first-child").width();u.css({position:"relative",left:w.offset().left-I.offset().left,width:M+"px"}),I.css({height:w.height()+4+"px"}),sliderWidth=o(g),g.css({position:"absolute",left:"0",width:sliderWidth}),y.hide(),v.hide(),g.width()<m.width()&&x.hide(),r(w);var O=Math.floor(g.width()/m.width()),T=O*m.width()*-1;x.click(i),y.click(n),e("img",I).click(function(){return b?!1:(w=e(this),s(this),void r(e(this)))}),e("#fe-play").click(function(){b?(k.addClass("shutdown"),b=!1,f()):(d(),b=!0)}),e(window).keydown(function(e){return b?!1:(37==e.which&&b!==!0&&(w=w.prev().length?w.prev():w,a()),void(39==e.which&&b!==!0&&(w=w.next().length?w.next():w,a())))}),e("#fe-previous-image").click(function(){b!==!0&&(w=w.prev().length?w.prev():w,a())}),e("#fe-next-image").click(function(){b!==!0&&(w=w.next().length?w.next():w,a())})}),this}}(jQuery);