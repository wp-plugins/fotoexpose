!function(e){e.fn.fotoexpose=function(t){var i={increment:"",fade:1e3,sliderSpeed:800,locationSpeed:600,viewer:"#fe-viewer",largePath:"gallery/largePhotos/",modwidth:!0,loaderClass:"fe-loader",loadedClass:"fe-loaded",thumbWidth:"",slideshow:4e3,effects:""},t=e.extend(i,t);return this.each(function(){function i(){var e=g.css("left").replace(/\D/g,"");e>O&&(g.animate({left:"-="+t.increment+"px"},t.sliderSpeed,function(){g.css("left").replace("px","")<=O&&x.fadeOut("fast"),b&&f(b)}),C.fadeIn("fast"))}function d(){g.css("left").replace("px","")<0&&(backto=-1*g.css("left").replace("px",""),backto-=t.increment,g.animate({left:"+="+t.increment+"px"},t.sliderSpeed,function(){g.css("left").replace("px","")>=0&&C.fadeOut("fast"),x.fadeIn("fast"),b&&f(b)}))}function n(){k.text("Stop"),y.show(),c=self.setTimeout(function(){return(b=b.next().length?b.next():!1)?(r(b),idc=f(b),idc>W-P&&i(),void slideshow()):(k.text("Play"),y.hide(),g.css({left:0}),b=I,f(b),x.show(),C.hide(),u=!1,r(b),!1)},t.slideshow)}function s(){k.removeClass("shutdown"),k.text("Play"),y.hide()}function a(){r(b),f(b),idc=f(b),idc>W-P?i():idc<1&&d()}function f(i){var d=e(i).offset().left-m.offset().left;return 1==t.modwidth?p.animate({left:d+"px",width:e(i).width()+"px"},t.locationSpeed):p.animate({left:d+"px"},t.locationSpeed),d}function o(t){var i=0;return t.find("img").each(function(){i+=e(this).outerWidth(!0)}),i}function h(t){var i=e("#fe-fotobox").width(),d=Math.floor(i/t);return d*t}function l(e){var t=v.width()<e.width()?v.width()/e.width():1,i={width:e.width()*t,height:e.height()*t};return i}function r(i){var d=i.attr("fe-full");e(t.viewer).find("img").remove("img"),e(t.viewer).addClass(t.loaderClass),img=new Image,e(img).load(function(){e(img).hide(),e(t.viewer).removeClass(t.loaderClass).addClass(t.loadedClass).append(img);var i=l(e(img));e(img).css({width:i.width,height:i.height,"margin-right":"auto","margin-left":"auto"}),e(t.viewer).css({height:i.height+24}),e(img).stop(!0,!0).fadeIn(t.fade),u?n():s()}).attr("src",d).stop(!0,!0).fadeIn(t.fade).addClass(t.effects)}{var c,u=!1,w=e(this),m=e("#fe-thumbs"),g=w.find("div:first-child"),p=e("#fe-current"),v=(e("#fe-location"),e("#fe-viewer")),x=e("#fe-more"),C=e("#fe-previous"),b=g.find("img:first-child"),k=e("#fe-playtext"),y=e(".fe-playing"),S=e("#largePhoto"),W=(e("."+t.loaderClass).css("background-image"),t.thumbWidth<1?h(b.width()):t.thumbWidth),I=g.find("img:first-child");g.find("img:last-child")}t.increment=t.increment>0?t.increment:W;var P=g.find("img:first-child").width();p.css({position:"relative",left:b.offset().left-m.offset().left,width:P+"px"}),m.css({height:b.height()+4+"px"}),sliderWidth=o(g),g.css({position:"absolute",left:"0",width:sliderWidth}),C.hide(),S.hide(),g.width()<w.width()&&x.hide(),r(b);var M=Math.floor(g.width()/w.width()),O=M*w.width()*-1;x.click(i),C.click(d),e("img",m).click(function(){return u?!1:(b=e(this),f(this),void r(e(this)))}),e("#fe-play").click(function(){u?(k.addClass("shutdown"),u=!1):(n(),u=!0)}),e(window).keydown(function(e){return u?!1:(37==e.which&&(b=b.prev().length?b.prev():b,a()),void(39==e.which&&(b=b.next().length?b.next():b,a())))})}),this}}(jQuery);